<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>Disjoint Set Union (Union-Find)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Disjoint Set Union(합치기-찾기)는 요소들을 상호 배타적 집합으로 관리해 연결성·동적 그룹화 문제를 빠르게 해결하는 자료구조로, 대규모 그래프·이미지 처리·분산 시스템에서 핵심 성능 요소입니다.">
  <link rel="stylesheet" href="/tech-knowledge-log/style.css?v=8">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <style>
    .topic-meta{color:#6b7280;margin-bottom:1.5rem;line-height:1.8}
    .topic-meta strong{color:#1a1a1a;font-weight:600}
    .topic-section{background:#f9fafb;border:1px solid #e5e7eb;padding:1.5rem;border-radius:12px;margin:1.5rem 0}
    .topic-section h2{margin-top:0;color:#1a1a1a;font-size:1.25rem;font-weight:600;margin-bottom:1rem}
    .topic-section p{margin:0.75rem 0;color:#374151;line-height:1.7}
    
    /* 코드 블록 스타일 */
    pre {
      background: #282c34;
      color: #abb2bf;
      padding: 1.5rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1rem 0;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    
    code {
      background: #f4f4f4;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.9em;
      color: #e06c75;
    }
    
    pre code {
      background: transparent;
      padding: 0;
      color: inherit;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <a href="/tech-knowledge-log/index.html" class="site-title">Tech Knowledge Log</a>
      <nav>
        <a href="/tech-knowledge-log/archive.html">Archive</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <article class="post-content">
      <h1>Disjoint Set Union (Union-Find)</h1>
      <div class="topic-meta">
        <div><strong>난이도 / Difficulty:</strong> Intermediate</div>
        <div><strong>날짜 / Date:</strong> 2025-12-09</div>
      </div>

      <section class="topic-section">
        <h2>내용</h2>
        <p>Disjoint Set Union(합치기-찾기)는 요소들을 상호 배타적 집합으로 관리해 연결성·동적 그룹화 문제를 빠르게 해결하는 자료구조로, 대규모 그래프·이미지 처리·분산 시스템에서 핵심 성능 요소입니다.</p>
        <p>작동 원리: 각 원소는 부모 포인터를 가지며 'find'는 집합 대표(root)를 반환합니다. 두 집합을 합칠 때는 union-by-rank(또는 size)로 더 작은 트리를 큰 트리 밑에 붙이고, find 시 경로압축(path compression)으로 트리 높이를 급격히 낮춰 상수근에 가까운 시간 복잡도를 얻습니다. 시간 복잡도는 아커만 역함수 수준(α(n))으로 거의 상수입니다.<br>실무 기술적 포인트: 프로덕션 코드에서는 메모리 레이아웃(연속 배열 사용), 병렬화 시 락 분할(lock striping) 또는 락프리 기법, 그리고 트랜잭션/롤백이 필요한 오프라인(dynamic) 상황에서는 rollback-able DSU(스택에 변경 이력 저장)를 사용합니다. 대규모 배치 작업에선 외부 메모리 처리(파일·분할 처리)나 압축 인덱스를 병행해 성능을 유지합니다.</p>
        <h2 style="margin-top:1.5rem;">활용</h2>
        <div>실제 사용 사례:<br>- 사례: OpenCV 이미지 처리에서 connected components<br>  출처: OpenCV (예: modules/imgproc/src/connectedcomponents.cpp, OpenCV 4.x)<br>  코드:<br>  <pre><code class="language-cpp">cv::Mat labels;<br>  int n = cv::connectedComponents(image, labels, 8);</code></pre><br>  실무 패턴: 라벨링 단계에서 내부적으로 union-find를 사용해 픽셀 집합 병합을 수행, 메모리 및 캐시 효율을 위해 연속 배열로 구현.<br><br>- 사례: NetworkX의 UnionFind 유틸리티<br>  출처: networkx.utils.union_find (NetworkX 2.x/3.x)<br>  코드:<br>  <pre><code class="language-python">from networkx.utils import UnionFind<br>  uf = UnionFind()<br>  uf.union(1,2); uf.union(3,4)<br>  uf.find(2)  # root</code></pre><br>  실무 패턴: 그래프 전처리에서 빠른 연결성 체크/클러스터링에 사용.<br><br>- 사례: Boost C++ disjoint_sets<br>  출처: boost/pending/disjoint_sets.hpp (Boost 라이브러리)<br>  실무 패턴: 크루스칼 MST, 대규모 그래프 라이브러리에서 안정적이고 튜닝된 구현 사용.<br><br>참고 연구: Tarjan의 path compression(1975), 동적 연결성 연구(Holm, de Lichtenberg, Thorup)에서 고급 변형 사용.</div>
      </section>

      <section class="topic-section">
        <h2>Content</h2>
        <p>Disjoint Set Union (Union-Find) manages mutually exclusive sets to answer connectivity/grouping queries extremely fast; it's widely used in graph algorithms, image labeling, and large-scale system preprocessing.</p>
        <p>How it works: Each element points to a parent; find returns the root representative. Union uses union-by-rank/size to attach the smaller tree under the larger. Path compression during find flattens trees. Combined, these yield amortized near-constant time per operation (inverse-Ackermann α(n)).<br>Practical details: production code optimizes layout (contiguous arrays), avoids recursion for find, and uses rollback-capable variants for offline dynamic connectivity. For concurrency, DSU may be partitioned (sharding) or implemented with fine-grained locks or lock-free primitives. For huge graphs, you may combine DSU with external memory techniques or compress indices to reduce memory and cache pressure.</p>
        <h2 style="margin-top:1.5rem;">Applications</h2>
        <div>Real-world use case:<br>- Case: OpenCV connected components<br>  Source: OpenCV implementation (modules/imgproc/src/connectedcomponents.cpp; OpenCV 4.x)<br>  Code:<br>  <pre><code class="language-cpp">cv::Mat labels;<br>  int n = cv::connectedComponents(image, labels, 8);</code></pre><br>  Production patterns: union-find performs label merges; implement with contiguous arrays for cache locality.<br><br>- Case: NetworkX UnionFind utility<br>  Source: networkx.utils.union_find (NetworkX 2.x/3.x)<br>  Code:<br>  <pre><code class="language-python">from networkx.utils import UnionFind<br>  uf = UnionFind()<br>  uf.union('a','b')<br>  uf.find('b')</code></pre><br>  Production patterns: fast preprocessing for connected-component detection or cluster membership checks.<br><br>- Case: Boost disjoint_sets<br>  Source: boost/pending/disjoint_sets.hpp (Boost C++ library)<br>  Code pattern: use disjoint_sets for Kruskal MST in performance-critical C++ projects.<br><br>Research/notes: foundational work by Tarjan; dynamic connectivity improvements by Holm et al. Practical best practice: union-by-rank + path compression, iterative find, and rollback DSU for offline queries.</div>
      </section>
    </article>
  </main>

  <footer>
    <p>&copy; 2025 Tech Knowledge Log. All rights reserved.</p>
  </footer>

  <script src="/tech-knowledge-log/script.js?v=8"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-java.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</body>
</html>